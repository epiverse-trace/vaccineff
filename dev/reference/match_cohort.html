<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Match Cohort to Reduce Observational Bias — match_cohort • vaccineff</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Match Cohort to Reduce Observational Bias — match_cohort"><meta name="description" content='This function builds pairs of vaccinated and unvaccinated
individuals with similar characteristics. The function relies on the matching
algorithm implemented in the package {MatchIt}, setting, by default,
method = "nearest", ratio = 1, and distance = "mahalanobis".
Exact and near characteristics are accepted, passed in the parameters exact
and nearest, respectively. The parameter nearest must be provided
together with the calipers as a named vector (e.g.,
nearest = c(characteristic1 = n1, characteristic2 = n2), where n1
and n2 are the calipers). The default matching method of the function is
static. This means that pairs are matched once, without taking into
account their vaccination, censoring, and outcome dates. After this, the
pairs whose exposition time do not coincide are removed to avoid negative
time-to-events.
The function returns a matched and adjusted by exposition cohort, with
information of the beginning of follow-up period of pairs (t0_follow_up),
corresponding to the vaccination date of the vaccinated individual, the
individual time-to-event (time_to_event) and the outcome status
(outcome_status), both taking into account the right-censoring dates.
Pairs are censored if the vaccinated or unvaccinated partner was previously
censored (i.e., if censoring_date_col is informed) and the censor occurs
before their outcomes. Rolling calendar matching method will be included in
future releases.'><meta property="og:description" content='This function builds pairs of vaccinated and unvaccinated
individuals with similar characteristics. The function relies on the matching
algorithm implemented in the package {MatchIt}, setting, by default,
method = "nearest", ratio = 1, and distance = "mahalanobis".
Exact and near characteristics are accepted, passed in the parameters exact
and nearest, respectively. The parameter nearest must be provided
together with the calipers as a named vector (e.g.,
nearest = c(characteristic1 = n1, characteristic2 = n2), where n1
and n2 are the calipers). The default matching method of the function is
static. This means that pairs are matched once, without taking into
account their vaccination, censoring, and outcome dates. After this, the
pairs whose exposition time do not coincide are removed to avoid negative
time-to-events.
The function returns a matched and adjusted by exposition cohort, with
information of the beginning of follow-up period of pairs (t0_follow_up),
corresponding to the vaccination date of the vaccinated individual, the
individual time-to-event (time_to_event) and the outcome status
(outcome_status), both taking into account the right-censoring dates.
Pairs are censored if the vaccinated or unvaccinated partner was previously
censored (i.e., if censoring_date_col is informed) and the censor occurs
before their outcomes. Rolling calendar matching method will be included in
future releases.'><meta property="og:image" content="https://epiverse-trace.github.io/vaccineff/logo.png"><meta name="robots" content="noindex"><!-- Google tag (gtag.js) --><script async src="https://www.googletagmanager.com/gtag/js?id=G-XZ471458FQ"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-XZ471458FQ');
</script></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">
    <a href="https://epiverse-trace.github.io/" class="external-link"><img src="https://epiverse-trace.github.io/blueprints/logo_white.svg" id="logo" alt="Epiverse-TRACE"></a>
    <a class="navbar-brand me-2" href="../index.html">vaccineff</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">0.0.4.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/vaccineff.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/cohort_design.html">Introduction to cohort design with vaccineff</a></li>
    <li><a class="dropdown-item" href="../articles/other_designs.html">Other study designs</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/epiverse-trace/vaccineff/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch"><li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Match Cohort to Reduce Observational Bias</h1>
      <small class="dont-index">Source: <a href="https://github.com/epiverse-trace/vaccineff/blob/main/R/coh_match.R" class="external-link"><code>R/coh_match.R</code></a></small>
      <div class="d-none name"><code>match_cohort.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function builds pairs of vaccinated and unvaccinated
individuals with similar characteristics. The function relies on the matching
algorithm implemented in the package <code>{MatchIt}</code>, setting, by default,
<code>method = "nearest"</code>, <code>ratio = 1</code>, and <code>distance = "mahalanobis"</code>.
Exact and near characteristics are accepted, passed in the parameters <code>exact</code>
and <code>nearest</code>, respectively. The parameter <code>nearest</code> must be provided
together with the calipers as a named vector (e.g.,
<code>nearest = c(characteristic1 = n1, characteristic2 = n2)</code>, where <code>n1</code>
and <code>n2</code> are the calipers). The default matching <code>method</code> of the function is
<code>static</code>. This means that pairs are matched once, without taking into
account their vaccination, censoring, and outcome dates. After this, the
pairs whose exposition time do not coincide are removed to avoid negative
time-to-events.
The function returns a matched and adjusted by exposition cohort, with
information of the beginning of follow-up period of pairs (<code>t0_follow_up</code>),
corresponding to the vaccination date of the vaccinated individual, the
individual time-to-event (<code>time_to_event</code>) and the outcome status
(<code>outcome_status</code>), both taking into account the right-censoring dates.
Pairs are censored if the vaccinated or unvaccinated partner was previously
censored (i.e., if <code>censoring_date_col</code> is informed) and the censor occurs
before their outcomes. Rolling calendar matching method will be included in
future releases.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">match_cohort</span><span class="op">(</span></span>
<span>  <span class="va">data_set</span>,</span>
<span>  <span class="va">outcome_date_col</span>,</span>
<span>  <span class="va">censoring_date_col</span>,</span>
<span>  <span class="va">start_cohort</span>,</span>
<span>  <span class="va">end_cohort</span>,</span>
<span>  method <span class="op">=</span> <span class="st">"static"</span>,</span>
<span>  nearest <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  exact <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  immunization_date_col <span class="op">=</span> <span class="st">"immunization_date"</span>,</span>
<span>  vacc_status_col <span class="op">=</span> <span class="st">"vaccine_status"</span>,</span>
<span>  vaccinated_status <span class="op">=</span> <span class="st">"v"</span>,</span>
<span>  unvaccinated_status <span class="op">=</span> <span class="st">"u"</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-data-set">data_set<a class="anchor" aria-label="anchor" href="#arg-data-set"></a></dt>
<dd><p><code>data.frame</code> with cohort information.</p></dd>


<dt id="arg-outcome-date-col">outcome_date_col<a class="anchor" aria-label="anchor" href="#arg-outcome-date-col"></a></dt>
<dd><p>Name of the column that contains the outcome dates.</p></dd>


<dt id="arg-censoring-date-col">censoring_date_col<a class="anchor" aria-label="anchor" href="#arg-censoring-date-col"></a></dt>
<dd><p>Name of the column that contains the censoring
date. <code>NULL</code> by default.</p></dd>


<dt id="arg-start-cohort">start_cohort<a class="anchor" aria-label="anchor" href="#arg-start-cohort"></a></dt>
<dd><p>Start date of the study.</p></dd>


<dt id="arg-end-cohort">end_cohort<a class="anchor" aria-label="anchor" href="#arg-end-cohort"></a></dt>
<dd><p>End date of the study.</p></dd>


<dt id="arg-method">method<a class="anchor" aria-label="anchor" href="#arg-method"></a></dt>
<dd><p>Method to match the cohort. Default is <code>static</code>.</p></dd>


<dt id="arg-nearest">nearest<a class="anchor" aria-label="anchor" href="#arg-nearest"></a></dt>
<dd><p>Named vector with name(s) of column(s) for <code>nearest</code> matching
and caliper(s) for each variable (e.g., <code>nearest = c("characteristic1" = n1, "characteristic2" = n2)</code>, where <code>n1</code> and <code>n2</code> are the calipers). Default is
<code>NULL</code>.</p></dd>


<dt id="arg-exact">exact<a class="anchor" aria-label="anchor" href="#arg-exact"></a></dt>
<dd><p>Name(s) of column(s) for <code>exact</code> matching. Default is <code>NULL</code>.</p></dd>


<dt id="arg-immunization-date-col">immunization_date_col<a class="anchor" aria-label="anchor" href="#arg-immunization-date-col"></a></dt>
<dd><p>Name of the column that contains the
immunization date to set the beginning of the follow-up period
(<code>t0_follow_up</code>). Default is <code>immunization_date</code>.</p></dd>


<dt id="arg-vacc-status-col">vacc_status_col<a class="anchor" aria-label="anchor" href="#arg-vacc-status-col"></a></dt>
<dd><p>Name of the column containing the vaccination.
Default is <code>vaccine_status</code>.</p></dd>


<dt id="arg-vaccinated-status">vaccinated_status<a class="anchor" aria-label="anchor" href="#arg-vaccinated-status"></a></dt>
<dd><p>Status assigned to the vaccinated population.
Default is <code>v</code>.</p></dd>


<dt id="arg-unvaccinated-status">unvaccinated_status<a class="anchor" aria-label="anchor" href="#arg-unvaccinated-status"></a></dt>
<dd><p>Status assigned to the unvaccinated population.
Default is <code>u</code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>object of the class <code>match</code>. List with results from static match:
<code>match</code>: <code>data.frame</code> with adjusted cohort,
<code>summary</code>: matching summary,
<code>balance_all</code>: balance of the cohort before matching,
<code>balance_matched</code>: balance of the cohort after matching.</p>
<p>Four columns are added to the structure provided in <code>data_set</code>:
<code>subclass</code>: ID of, matched pair,
<code>t0_follow_up</code>: beginning of follow-up period for pair,
<code>time_to_event</code>: time to event,
and <code>outcome_status</code>: outcome status
(1:positive, 0: negative).</p>
    </div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by David Santiago Quevedo, Zulma M. Cucunubá, International Development Research Center (IDRC).</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

